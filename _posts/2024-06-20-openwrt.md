---
layout: post
title: Installing OpenWrt on Google WiFi
---

![Google WiFi]({{ site.baseurl }}/images/google-wifi.png)

## Motivation

I wanted to assign a DNS server to my network devices via DHCP to support a network-wide ad blocker.
Google WiFi stock software does not provide a way to do this.
You can point the upstream DNS server to your ad blocker, but you won't get client-specific statistics.

## Installation of OpenWrt

I made one router with WiFi and one "dumb AP", with fast roaming between them.

I found these sites useful:

- [OpenWrt instructions](https://openwrt.org/toh/google/wifi)
- [Somebody's step-by-step guide](https://forum.openwrt.org/t/finally-installed-openwrt-on-my-google-wifi-ac-1304/183541/2)
- [Somebody's notes](https://www.reddit.com/r/openwrt/comments/1agw46g/putting_openwrt_on_google_wifi_devices/)
- [How to set up a dumb AP](https://openwrt.org/docs/guide-user/network/wifi/dumbap)
- [Video on how to set up fast roaming](https://www.youtube.com/watch?v=kMgs2XFClaM)

## Results

Installation was pretty easy.
The Google OnHub Recovery Utility UI says you need an 8GB flash drive.
I used a 2 GB and it was fine.
The first flash drive I used didn't work so I tried a different one.

The new firmware is working fine.
I set the DNS server via DHCP like I wanted.
Fast WiFi handoff works great: as good as it did with the stock Google WiFi firmware.

The one feature I miss is long-term reporting of traffic statistics for visualization.
All I really want right now is total bytes up and total bytes down per month.
I found some ways to add this, but they look a bit involved to set up and I've had enough of this project for now.
Maybe I'll add it later.
